/*!
 * Pez Analytics v1.0
 * http://mentalpez.com
 *
 * Copyright 2011, Evan Nagle
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */

(function(d,b){var c=function(j){var a=this;var e=j||{};var h=e.id;var f=e.debug;var g=d._gaq;var i=function(k){if(f){log(k)}};a.track=function(k){var l=["_trackEvent",k.category,k.action];if(k.label){l.push(k.label)}if(!isNaN(k.value)){l.push(parseInt(k.value,10))}g.push(l);i("ga event tracked: "+l)};a.trackDownloads=function(k){if(typeof(k)==="string"){k=k.split(",")}b("a:not(.untracked)").each(function(){var l=b(this);var o=l.attr("href");var p=o.split("/");var n=p[p.length-1].split(".")[0];for(var q=0;q<k.length;q++){var m=b.trim(k[q]);if(o.length-o.lastIndexOf(m)-m.length===0){l.click(function(r){r.preventDefault();a.track({category:"Downloads",action:m,label:n});setTimeout(function(){d.location=o},100)})}}})};a.trackOutboundLinks=function(k){b("a").live("click",function(n){var l=b(this);var o=b.trim(l.attr("href")||"").toLowerCase();if(o.length===0||o.substring(0,1)==="#"){return}if(o.indexOf("http")===0){n.preventDefault();var m=o.split(/^https?:\/\/[^\/]\//)[0].split("//")[1].split("/")[0].toLowerCase();if(m==d.location.hostname.toLowerCase()){return}a.track({category:"Outbound Links",action:m,label:o});setTimeout(function(){d.location=o},100)}})};a.trackForms=function(k){var l=function(){var m=b(this);var n=m.closest("form[name]");a.track({category:"Forms",action:b.trim(n.attr("name")),label:b.trim(m.attr("name"))})};b("form[name] input:not([type=submit]), form[name] textarea").live("focus",l);b("form[name] input[type=checkbox], form[name] input[type=radio], form[name] select").live("click",l);b("form[name] input[type=submit]").live("click",function(){var m=b(this);var n=m.closest("form[name]");a.track({category:"Forms",action:b.trim(n.attr("name")),label:"Submit"})})};(function(){g=g||[["_setAccount",h],["_trackPageview"]];if(e.trackPageLoadTime){g.push(["_trackPageLoadTime"])}var l=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var m=document.createElement("script");m.type="text/javascript";m.async=true;m.src=l;var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(m,k);i("ga account loaded: "+h);if(e.trackDownloads){a.trackDownloads(e.trackDownloads)}if(e.trackOutboundLinks){a.trackOutboundLinks()}if(e.trackForms){a.trackForms()}})()};b(function(){var a=b("head meta[name=analytics]");d.ga=d.ga||new c({id:a.attr("data-id"),debug:a.attr("data-debug")==="true",trackDownloads:a.attr("data-trackDownloads"),trackOutboundLinks:a.attr("data-trackOutboundLinks"),trackForms:a.attr("data-trackForms"),trackPageLoadTime:a.attr("data-trackPageLoadTime")})})})(window,jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;if(this.console){console.log(Array.prototype.slice.call(arguments))}};
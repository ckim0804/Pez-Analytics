/*
 * Pez Analytics v1.0
 * http://mentalpez.com
 *
 * Copyright 2011, Evan Nagle
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function(d,b){var c=function(i){var a=this;var e=i||{};var g=e.id;var f=e.debug;var h=function(j){if(f){log(j)}};a.track=function(j){var k=["_trackEvent",j.category,j.action];if(j.label){k.push(j.label)}if(!isNaN(j.value)){k.push(parseInt(j.value,10))}_gaq.push(k);h("ga event tracked: "+k)};a.trackDownloads=function(j){if(typeof(j)==="string"){j=j.split(",")}b("a:not(.untracked)").each(function(){var k=b(this);var n=k.attr("href");var o=n.split("/");var m=o[o.length-1].split(".")[0];for(var p=0;p<j.length;p++){var l=b.trim(j[p]);if(n.length-n.lastIndexOf(l)-l.length===0){k.click(function(q){q.preventDefault();a.track({category:"Downloads",action:l,label:m});setTimeout(function(){d.location=n},100)})}}})};a.trackOutboundLinks=function(j){b("a").live("click",function(m){var k=b(this);var n=b.trim(k.attr("href")||"").toLowerCase();if(n.length===0||n.substring(0,1)==="#"){return}if(n.indexOf("http")===0){var l=n.split(/^https?:\/\/[^\/]\//)[0].split("//")[1].split("/")[0].toLowerCase();if(l==d.location.hostname.toLowerCase()){return}m.preventDefault();a.track({category:"Outbound Links",action:l,label:n});setTimeout(function(){d.location=n},100)}})};a.trackForms=function(j){var k=function(){var l=b(this);var m=l.closest("form[name]");a.track({category:"Forms",action:b.trim(m.attr("name")),label:b.trim(l.attr("name"))})};b("form[name] input:not([type=submit]), form[name] textarea").live("focus",k);b("form[name] input[type=checkbox], form[name] input[type=radio], form[name] select").live("click",k);b("form[name] input[type=submit]").live("click",function(){var l=b(this);var m=l.closest("form[name]");a.track({category:"Forms",action:b.trim(m.attr("name")),label:"Submit"})})};(function(){d._gaq=d._gaq||[];d._gaq.push(["_setAccount",g]);d._gaq.push(["_trackPageview"]);if(e.trackPageLoadTime){_gaq.push(["_trackPageLoadTime"])}var k=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var l=document.createElement("script");l.type="text/javascript";l.async=true;l.src=k;var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(l,j);h("ga account loaded: "+g);if(e.trackDownloads){a.trackDownloads(e.trackDownloads)}if(e.trackOutboundLinks){a.trackOutboundLinks()}if(e.trackForms){a.trackForms()}})()};b(function(){var a=b("head meta[name=analytics]");d.ga=d.ga||new c({id:a.attr("data-id"),debug:a.attr("data-debug")==="true",trackDownloads:a.attr("data-trackDownloads"),trackOutboundLinks:a.attr("data-trackOutboundLinks"),trackForms:a.attr("data-trackForms"),trackPageLoadTime:a.attr("data-trackPageLoadTime")})})})(window,jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);arguments.callee=arguments.callee.caller;if(this.console){console.log(Array.prototype.slice.call(arguments))}};